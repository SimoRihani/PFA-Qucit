<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="post-service/post-service.html">
<link rel="import" href="bower_components/paper-progress/paper-progress.html">
<link rel="import" href="bower_components/paper-slider/paper-slider.html">
<link rel="import" href="./post-card.html">

<polymer-element name="post-list" attributes="show">
  <template>
    <style>
    :host {
      display: block;
      width: 100%;
    }
    post-card {
      margin-bottom: 8px;
    }
    #connectionicon {
      color: #636363;
      width: 52%;
    }
    #alert {
      position: absolute;
      bottom: 3px;
      right: 3px;
      color: #da4336;
    }
    #connectionicon:active {
      color: #da4336;
    }
    :host([connection]) #connectionicon {
      color: #da4336;
    }

    
    paper-progress::shadow #activeProgress {
     background-color: red;
    }

    paper-progress::shadow #secondaryProgress {
     background-color: purple;
    }

    paper-progress::shadow #progressContainer {
     background-color: #64ffda;
    }

    paper-spinner.blue::shadow .circle {
      border-color: #4285f4;
      color: red;
    }
    /*.ligne {
      font-size: 0.6em;
      width: 25%;
      text-align: center;
    }*/
    .ligne {
      /*position: absolute;
      top: 4px;
      left: 3px;*/
    }
    .icon {
    position: relative;
    color: #fff;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    opacity: 0.7;
    text-align: center;
    margin: 1.5px 1.5px 1.5px 1.5px;
    padding: 2px;
    }
    </style>


    <post-service id="service" posts="{{posts}}"></post-service>
    
    <div layout vertical center>
      <template repeat="{{post in posts}}">
        <post-card
          favorite="{{post.favorite}}"
          on-favorite-tap="{{handleFavorite}}"
          hidden?="{{show == 'favorites' && !post.favorite}}">

          <h3>{{post.day}}</h3>
          <h4>{{post.time}}</h4>
          <!--<img src="{{post.avatar}}" width="70" height="70">-->
          
          <div vertical layout class="ligne"> <!-- Done in a static way, to improve to dynamic way -->
            <div class="icon" style="background-color: red;" hidden?={{post.line!="B"}}>B</div>
            <div class="icon"style="background-color: purple;" hidden?={{post.line!="A"}}>A</div>
            <div class="icon"style="background-color: #01B0F0;" hidden?={{post.line!="C"}}>C</div>
            <div class="icon"style="background-color: purple;" hidden?={{post.line!="16"}}>16</div>
            <div class="icon" style="background-color: red;" hidden?={{post.line!="BA"}}>B</div>
            <div class="icon"style="background-color: purple;" hidden?={{post.line!="BA"}}>A</div>
          </div>
      
          
          <h2>{{post.pathname}}</h2>
          <h5>{{post.direction}}</h5>
          <core-icon-button 
            connection="{{post.connection}}"
            id="connectionicon"
            icon="attachment"
            title="Connection"><h5>{{post.connStation}}</h5>
          </core-icon-button>
          <core-icon-button
          id="alert"
          hidden?={{!post.breakdown}}
           icon="trending-up"
           title="Alternative path ?">
         </core-icon>
        </post-card>
      </template>
    </div>
  </template>

  

  <script>
  Polymer({
    handleFavorite: function(event, detail, sender) {
      var post = sender.templateInstance.model.post;
      this.$.service.setFavorite(post.pid, post.favorite);
    },
    publish: {
    connection: {
      value: false,
      reflect: true
    }
  }
  });
  </script>
</polymer-element>
